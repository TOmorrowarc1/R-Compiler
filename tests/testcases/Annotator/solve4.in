/*
Test Name: ConstTypeSolve4
Test Target: const evaluation rely on the struct solution
Verdict: Success
Author: Renshu Ge
*/

struct A{
  b:B,
  array1_:[B;1],
  array2_:[usize;10],
}

struct B{
  length_ : usize,
}

const a : A = A{
  b:B{length_:3},
  array1_:[b_const],
  array2_:[3;10],
};
const b_const : B = B{
  length_ : 5,
};

fn main() {
  impl B {
    const length :usize = 3;
    const second_last :usize = a.b.length_;
  }
  const last : usize = B::length + b_const.length_ * a.array2_[B::second_last];
  exit(0);
}